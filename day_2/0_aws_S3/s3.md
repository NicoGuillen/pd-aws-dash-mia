---
marp: true
theme: default
paginate: true
---

<style>
img[alt~="center"] {
  display: block;
  margin: 0 auto;
}
</style>

# Amazon Simple Storage Service: S3

---

- Amazon Simple Storage Service (Amazon S3) es un servicio de almacenamiento de objetos.
- Amazon S3 tiene una interfaz de servicios web simple que puede utilizar para almacenar y recuperar cualquier cantidad de datos.
- Podemos realizar las operaciones directamente desde la interfaz web, desde la CLI, desde la extension de Visul Studio Code o desde python mediante boto3.
- Pandas nos permite leer ficheros de forma directa usando la URL del fichero.


---

Los buckets son los contenedores fundamentales en Amazon S3 para el almacenamiento de datos. 
- Cada objeto dentro del bucket puede contener hasta 5 TB de datos.
- Se pueden conceder o denegar acceso a otras personas que desean cargar o descargar datos en su bucket de Amazon S3.

---


Buckets

Un bucket es un contenedor para objetos almacenados en Amazon S3. Cada objeto está almacenado en un bucket. Por ejemplo, si el objeto denominado photos/puppy.jpg se almacena en el bucket awsexamplebucket1 en la región EE. UU. Oeste (Oregón), es direccionable mediante la URL https://awsexamplebucket1.s3.us-west-2.amazonaws.com/photos/puppy.jpg. 


Objects

Los objetos son las entidades fundamentales almacenadas en Amazon S3. Los objetos se componen de datos de objetos y metadatos. La parte de datos es opaca para Amazon S3. Los metadatos son conjuntos de pares nombre-​valor que describen el objeto. Incluyen algunos metadatos predeterminados, como la fecha de la última modificación y los metadatos HTTP estándar, como Content-Type. También puede especificar metadatos personalizados en el momento en que se almacena el objeto. 

Keys

Una clave es el identificador único de un objeto dentro de un bucket. Cada objeto de un bucket tiene exactamente una clave. La combinación de un bucket, clave e ID de versión identifican de forma única cada objeto. Por tanto, puede pensar en Amazon S3 como una asignación de datos básica entre "bucket + clave + versión" y el objeto en sí. Se puede acceder a cada objeto de Amazon S3 de forma exclusiva a través de la combinación de punto de enlace de servicio web, nombre del bucket, clave, y de forma opcional, una versión. Por ejemplo, en la URL https://doc.s3.amazonaws.com/2006-03-01/AmazonS3.wsdl, "doc" es el nombre del bucket y "2006-03-01/AmazonS3.wsdl" es la clave. 

Regions

Puede elegir la Región de AWS geográfica donde Amazon S3 almacenará los buckets que usted cree. Puede elegir una región para optimizar la latencia, minimizar los costos o cumplir con requisitos legales. Los objetos almacenados en una región nunca la abandonan, a menos que se transfieran expresamente a otra región.

---

Clases de almacenamiento

Amazon S3 ofrece varios tipos de almacenamiento diseñados para distintos casos de uso. Incluyen Amazon S3 STANDARD para almacenamiento general de los datos a los que se accede frecuentemente, Amazon S3 STANDARD_IA para datos de duración prolongada a los que se obtiene acceso con menos frecuencia y S3 Glacier para un archivado a largo plazo. 

- https://aws.amazon.com/es/s3/pricing/

---

# Creación de un Buckets mediante la interfaz web

ara crear un bucket

    Inicie sesión en la AWS Management Console y abra la consola de Amazon S3 en https://console.aws.amazon.com/s3/

.

Elija Create bucket (Crear bucket).

Se abrirá la página Crear bucket.

En Bucket name (Nombre del bucket), escriba un nombre compatible con DNS para el bucket.

El nombre del bucket debe:

    Ser único en todo Amazon S3.

    Tener entre 3 y 63 caracteres.

    No contiene caracteres en mayúsculas.

    Comenzar por una letra minúscula o un número.

Una vez que haya creado el bucket, no podrá modificar su nombre. Para obtener información acerca de la nomenclatura de los buckets, consulte Reglas de nomenclatura de buckets.
importante

Evite incluir información confidencial, como números de cuenta, en el nombre del bucket. El nombre del bucket será visible en las URL que señalan a los objetos almacenados en él.

En Region (Región), elija la Región de AWS en la que desea que se encuentre el bucket.

Elija una región cercana geográficamente para minimizar la latencia y los costos, y para cumplir los requisitos normativos. Los objetos almacenados en una región nunca abandonarán esa región salvo que usted los transfiera de forma específica a otra. Para obtener una lista de las Regiones de AWS de Amazon S3, consulte Puntos de enlace de servicio de AWS en la Referencia general de Amazon Web Services.

Mantenga la configuración restante establecida en los valores predeterminados. Para obtener más información sobre la configuración de los buckets, consulte Crear un bucket.

Elija Create bucket (Crear bucket).


---

Para cargar un objeto a un bucket

    Abra la consola de Amazon S3 en https://console.aws.amazon.com/s3

.

En la lista Buckets, seleccione el nombre del bucket en el que desee cargar el objeto.

En la pestaña Objects (Objetos) del bucket, elija Upload (Cargar).

En Files and folders (Archivos y carpetas), elija Add files (Añadir archivos).

Seleccione un archivo que cargar y luego seleccione Open (Abrir).

Seleccione Upload.


Para descargar un objeto desde un bucket de S3

    Inicie sesión en la AWS Management Console y abra la consola de Amazon S3 en https://console.aws.amazon.com/s3/

.

En la lista Buckets (Buckets), elija el nombre del bucket que contiene el objeto que desea descargar.

Puede descargar un objeto de un bucket de S3 de cualquiera de las siguientes maneras:

    Seleccione el nombre del objeto que quiera descargar.

    En la página Overview (Información general), seleccione el objeto y, en el menú Actions (Acciones), elija Download (Descargar) o Download as (Descargar como) en caso de que desee descargar el objeto en una carpeta concreta.

    Elija el objeto que desea descargar y, a continuación, en el menú Object actions (Acciones del objeto), elija Download (Descargar) o Download as (Descargar como) en caso de que desee descargar el objeto en una carpeta concreta.

    En caso de que desee descargar una versión específica del objeto, elija el nombre de ese objeto que desea descargar. Elija la pestaña Versions (Versiones) y, a continuación, en el menú Actions (Acciones) elija Download (Descargar) o Download as (Descargar como) en caso de que desee descargar el objeto en una carpeta concreta.

----

# Ejercicio

- Crea un bucket
- Sube un fichero
- Descarga el fichero que acabas de añadir

---




---


---
- AWS CLI
https://docs.aws.amazon.com/cli/latest/userguide/cli-services-s3-commands.html

- Extension VSCODE

- Python Boto3
https://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3-example-creating-buckets.html

- Pandas



- static web pages in S3



---

# Boto3
- https://boto3.amazonaws.com/v1/documentation/api/latest/guide/index.html#tools

Auth methods for boto3:

- Create a sesion with the auth, a Config object that's created and passed as the config parameter when creating a client
- Environment variables:
    - **AWS_ACCESS_KEY_ID:** The access key for your AWS account.
    - **AWS_SECRET_ACCESS_KEY** The secret key for your AWS account.
- The ~/.aws/config file. Use AWS CLI to create a config file. The reason is, with the config file, the CLI or the SDK will automatically look for credentials in the ~/.aws folder. And the good thing is that AWS CLI is written in python:
    - pip install awscli #can add user flag
    - aws configure
    - After this you can access boto and any of the api without having to specify keys (unless you want to use a different credentials).

```python
import boto3
session = boto3.Session(
    aws_access_key_id=settings.AWS_SERVER_PUBLIC_KEY,
    aws_secret_access_key=settings.AWS_SERVER_SECRET_KEY,
)
s3 = session.resource('s3')
```

---

- Amazon S3 se puede usar para alojar un sitio web estático.
- En un sitio web estático, cada página web incluye contenido estático.
- Cuando configura un bucket como sitio web estático, debe habilitar el alojamiento de sitios web estáticos, configurar un documento de índice y establecer permisos. 

- https://docs.aws.amazon.com/es_es/AmazonS3/latest/userguide/WebsiteHosting.html
---

DEMO

---